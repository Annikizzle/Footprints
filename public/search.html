<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Footprints - Discover Footprints</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="assets/css/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Special+Elite" rel="stylesheet">

  <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon">

  <script src="https://use.fontawesome.com/249b49c3b8.js"></script>
</head>

<body>

  <!--NAVBAR -->
  <nav class="navbar navbar-default navigation-clean headerContainer">
    <section class="container">
      <header class="navbar-header"><a id="logo" class="navbar-brand navbar-link" href="index.html">Footprints</a>
        <button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1"><span
            class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span>
          <span class="icon-bar"></span></button>
      </header>
      <div class="collapse navbar-collapse" id="navcol-1">
        <ul class="nav navbar-nav navbar-right">
          <li role="presentation"><a href="search.html">Discover Footprints</a></li>
          <li role="presentation"><a href="add.html">Leave Your Footprint</a></li>
        </ul>
      </div>
    </section>
  </nav>


  <!--MAIN--->
  <main id="searchContainer">

    <section class="container">
      <div class="row">
        <div class="col-md-12 personalityQuiz">
          <h2>Discover Footprints</h2>

          <!--SEARCH-->
          <div class="searchBox">
            <div class="navbar col-md-12">
              <form class=" text-center">
                <div class="inner-addon right-addon">
                    <button id="search-btn" type="button" class="btn btn-primary icon">Search</button>
                  <input id="fp-search" type="text" class="form-control" placeholder="City name"/>
                </div>
              </form>
            </div>
          </div>

          <!-- Modal with search result -->
          <div id="searchMatch" class="modal fade" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h3 class="modal-title">Your search:</h3>
                </div>
                <div class="modal-body">
                  <h2 id="searchCity"></h2>
                  <h2 id="searchCountry"></h2>
                  <img id="searchPhoto" src="">
                  <p id="searchDesc"></p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>


    <section class="container">
      <div class="row">
        <div class="col-md-12 personalityQuiz">
          <h2>Recent Footprints</h2>
        </div>
      </div>
    </section>

    <section class="container">
      <div class="row">
        <div class="col-md-12">
          <div id="results">

            <!--These cards will appear from database, just testing stylization-->
            <!-- <div class="col-md-4 col-sm-6">
              <div class="card footprintCard">
                <img id="bestMatchPhoto"
                  src="" class="card-img-top">
                <div class="card-block" style="text-align:center">
                  <h4 id="bestMatchCity" class="card-title" style="font-weight: bold;"></h4>
                  <h4 id="bestMatchCountry" class="card-title" style="font-weight: bold;"></h4>
                  <hr>
                  <p id="bestMatchDesc" class="footprintDescription"></p>
                  <a href="#" class="btn btn-primary card-btn commentBtn">Comment on this Footprint</a>
                  <hr>
                  <h4>Most Recent Comment</h4>
                  <p class="comment"></p>
                  <a href="#" class="btn btn-primary card-btn editCommentBtn">Edit this Comment</a> -->

                  <!-- Modal opens when comment button is clicked-->
                  <div id="makeCommentModal" class="modal fade" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="bestMatchCity"></h4>
                          <h4 class="modal-title" id="bestMatchCountry"></h4>
                        </div>
                        <div class="modal-body">
                          <h4>Please enter your username</h4>
                          <input class="col-md-12" id="username"></input>
                          <h4 style="margin-top: 60px;">Comment</h4>
                          <input class="col-md-12" id="comment"></input>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          <button id="saveComment" type="button" class="btn btn-primary">Save</button>
                        </div>
                      </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                  </div><!-- /.modal -->

                  <!-- Modal opens when you edit a comment-->
                  <div id="editCommentModal" class="modal fade" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                          <h4 class="modal-title" id="bestMatchCity"></h4>
                          <h4 class="modal-title" id="bestMatchCountry"></h4>
                        </div>
                        <div class="modal-body">
                          <p class="col-md-12" contenteditable="true"></p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          <button id="updateCommentBtn" type="button" class="btn btn-primary">Save changes</button>
                          <button id="deleteCommentBtn" type="button" class="btn btn-danger" data-dismiss="modal">Delete comment</button>
                        </div>
                      </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                  </div><!-- /.modal -->

                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>
  </main>


  <!--FOOTER-->

  <footer id="myFooter">
    <main class="container myColsrow">
      <div class="row">
        <section class="col-sm-3 myCols">
          <h5>Get started</h5>
          <ul>
            <li><a href="survey.html">Take the Footprints Quiz</a></li>
            <li><a href="search.html">Discover Footprints</a></li>
            <li><a href="add.html">Create Footprint</a></li>
          </ul>
        </section>
        <section class="col-sm-3 myCols">
          <h5>About us</h5>
          <ul>
            <li><a href="index.html">Company Information</a></li>
            <li><a href="https://github.com/Annikizzle/Footprints/issues">Contact us</a></li>
            <li><a href="https://github.com/Annikizzle/Footprints">GitHub Repo</a></li>
          </ul>
        </section>
        <section class="col-sm-3 myCols">
          <h5>Support</h5>
          <ul>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Help desk</a></li>
            <li><a href="#">Forums</a></li>
          </ul>
        </section>
        <section class="col-sm-3 myCols">
          <h5>Legal</h5>
          <ul>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">Terms of Use</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </section>
      </div>
    </main>
    <div class="social-networks">
      <a href="#" class="twitter"><i class="fa fa-twitter"></i></a>
      <a href="#" class="facebook"><i class="fa fa-facebook-official"></i></a>
      <a href="#" class="google"><i class="fa fa-instagram"></i></a>
    </div>
    <div class="footer-copyright">
      <p>Â© 2019 Copyright CWRU Coding Bootcamp Group H </p>
    </div>
  </footer>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <script type="text/javascript">
$("#search-btn").on("click", function () {
      let searchedCity = $("#fp-search").val().trim();
      searchedCity = searchedCity.replace(/\s+/g, "").toLowerCase();
      console.log("Button was pressed!")
      $.get("/api/search/" + searchedCity, function (data) {
        console.log(data);
        if (data) {
          $("#searchCity").text(data.city);
          $("#searchCountry").text(data.country);
          $("#searchDesc").text(data.locDesc);
          $("#searchPhoto").text(data.img);
        }
        else {
          $("#seachCity").text("No footprints here yet!");
          $("#footprint").hide();
        }
      });
    });
  

    $(document).ready(function(){
        $("#search-btn").click(function(){
          $("#searchMatch").modal('show');
        });
        $(".commentBtn").click(function(){
          $("#makeCommentModal").modal('show');
        });
        $(".editCommentBtn").click(function(){
          $("#editCommentModal").modal('show');
        });
        $(".updateBtn").click(function() {
          $("#updateFootprintModal").modal('show');
        });
        loadSearch();
    });

  function loadSearch() {
    $.get("/api/search/", function (data) {
      console.log(data);
    for (var i=0; i < data.length; i++) {

      var img = $("<img>");
      img.attr("src", data.img);
      img.attr("alt", data.city);
      img.addClass('card-img-top');
      $(img).attr('id', 'bestMatchPhoto');

      var city = $("<h4>");
      city.addClass('card-title');
      city.text(data.city);
      $(city).attr('id', 'bestMatchCity');

      var country = $("<h4>");
      country.addClass('card-title');
      country.text(data.country);
      $(country).attr('id', 'bestMatchCountry');

      var locDesc = $("<p>");
      locDesc.addClass('footprintDescription');
      locDesc.text(data.locDesc);
      $(locDesc).attr('id', 'bestMatchDesc');

      var overlay = $("<div>");
      overlay.addClass('card-block');
      overlay.append(locDesc);
      overlay.append(city);
      overlay.append(country);

      var locDiv = $("<div>");
      locDiv.append(img);
      locDiv.append(overlay);
      locDiv.addClass('card', 'footprintCard');
      $(".col-md-4", ".col-sm-6").append(locDiv);

    }
  });
};
  </script>


</body>

</html>